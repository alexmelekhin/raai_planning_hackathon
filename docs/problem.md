# Задание на семинар

## Общее описание задачи

Обновится перед семинаром 

## Входные данные

На вход алгоритму планирования поступают следующие сообщения:

- [pnc_task_msgs/PlanningTask](./../msgs/pnc_task_msgs/msg/PlanningTask.msg) - сообщение с задачей планировани. Публикуется в топик `/planning_node/task`. Сообщение содержит информацию о начальной, конечной точке планирования, а также карте занятости (nav_msgs/OccupancyGrid).

Карта занятости представляет собой сообщение типа [nav_msgs/OccupancyGrid](http://docs.ros.org/en/noetic/api/nav_msgs/html/msg/OccupancyGrid.html). В поле `data` записывается значение _занятости_ ячейки от 0 до 100. Принято следующее соглашение: <br>
    __0-49__: Ячейка свободна <br>
    __50__: Неизвестная ячейка <br>
    __51-100__: Ячейка-препятствие

## Выходные данные

Разработанный ROS-узел должен уметь выдавать следующие сообщения:

- [thunder_msgs/ThunderCommand](./../msgs/thunder_msgs/msg/ThunderControl.msg) - сообщение с командой управление башней-опрыскивателем. Публикуется в топик `/thunder/control_cmd`. Более подробное описание [ниже](#управление-башней-опрыскивателем-thunder).

- [rtp_msgs/PathStamped](./../msgs/rtp_msgs/msg/PathStamped.msg) - сообщение с найденной траекторией движения. Публикуется в топик `/planner_sb_node/trajectory`. 

### Управление башней-опрыскивателем Thunder

Для управления башней-опрыскивателем необходимо посылать сообщения типа [thunder_msgs/ThunderControl](./msgs/thunder_msgs/msg/ThunderControl.msg) в топик `/thunder/control_cmd`. 

Управление в автоматическом режиме происходит при заполнении полей `can_id` и `control_mode`. 

Протокол управления в автоматическом режиме:

| Поле         | Тип    | Примечание |
|-|-|-|
| can_id       | uint32 | Значение для управления в автоматическом режиме: `0x210`                                                                                         |
| control_mode | uint8  | `бит 0`: 1 - вентиляторы включены, 0 - выключены<br>`бит 1`: 1 - подача воды включена, 0 - выключена<br>`бит 2`: 1 - вращение башни включено, 0 -выключено |

Пример заполнения сообщения для включения вентиляторов, подачи воды и вращения башни:

```cpp
#include "thunder_msgs/ThunderControl.h"

...
thunder_msgs::ThunderControl msg;
msg.can_id = 0x210;
msg.control_mode = 1 * 4 + 1 * 2 + 1 * 1;
...

```
